<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="https://marsacom.github.io/style.css">
        <title>CSOC Twitter Fall</title>
    </head>
    <body>
        <script>
            window.twttr = (function(d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0],
                    t = window.twttr || {};
                if (d.getElementById(id)) return t;
                js = d.createElement(s);
                js.id = id;
                js.src = "https://platform.twitter.com/widgets.js";
                fjs.parentNode.insertBefore(js, fjs);
                t._e = [];
    
                t.ready = function(f) {
                    t._e.push(f);
                };
    
                return t;
            }(document, "script", "twitter-wjs"));
        </script>
        <section id="tweets" >
            <div id="tweet1" style="height:600px" align="center"></div>
        </section>
        <script>
            twttr.ready(
                function (twttr) {
                    setInterval(() => {
                        fetch('http://localhost:3000/')
                            .then((response) => response.json())
                            .then((data) => {
                                twttr.widgets.createTweet(
                                    data.id,
                                    document.getElementById('tweet1'),
                                    {
                                        theme: 'dark', 
                                        conversation: 'none',
                                        dnt: true,
                                    }
                                ).then( function( el ) {
                                    console.log('Tweet added.');
                            });
                        }, 30000);
                    })
                }
            );
        </script>
    </body>
</html>
